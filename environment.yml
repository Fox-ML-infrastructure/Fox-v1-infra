name: trader_env
channels:
  - conda-forge
  - defaults
  - pytorch
  - nvidia

dependencies:
  # Python
  - python=3.10

  # Core Scientific Computing
  - numpy>=1.24.0
  - pandas>=2.0.0
  - scipy>=1.10.0
  
  # Data Handling & Storage
  - pyarrow>=12.0.0  # For parquet files
  - fastparquet>=2023.0.0
  - h5py>=3.8.0
  - tables>=3.8.0
  
  # Machine Learning Core
  - scikit-learn>=1.3.0
  - joblib>=1.3.0
  
  # Deep Learning (Optional - if using neural networks)
  - pytorch>=2.0.0
  - torchvision>=0.15.0
  - pytorch-cuda=12.1  # Match your CUDA version (13.0 compatible)
  
  # XGBoost (CPU version, LightGBM will be custom built)
  - xgboost>=2.0.0
  
  # Statistical & Time Series
  - statsmodels>=0.14.0
  - ta-lib>=0.4.0  # Technical analysis
  
  # Visualization
  - matplotlib>=3.7.0
  - seaborn>=0.12.0
  - plotly>=5.14.0
  
  # Configuration & Utilities
  - pyyaml>=6.0
  - toml>=0.10.0
  - python-dotenv>=1.0.0
  
  # Progress Bars & Logging
  - tqdm>=4.65.0
  - colorlog>=6.7.0
  
  # System Utilities
  - psutil>=5.9.0
  
  # Financial Data
  - yfinance>=0.2.0
  - pandas-datareader>=0.10.0
  
  # API & Networking
  - requests>=2.31.0
  - aiohttp>=3.8.0
  - websockets>=11.0
  
  # Database (if needed)
  - sqlalchemy>=2.0.0
  - psycopg2>=2.9.0
  
  # Jupyter & Development Tools
  - jupyter>=1.0.0
  - jupyterlab>=4.0.0
  - ipython>=8.12.0
  - ipywidgets>=8.0.0
  
  # Testing
  - pytest>=7.3.0
  - pytest-cov>=4.1.0
  
  # Code Quality
  - black>=23.0.0
  - ruff>=0.0.270
  - mypy>=1.3.0
  
  # Build Tools (for LightGBM CUDA build)
  - cmake>=3.26.0
  - make
  - gcc_linux-64>=11.0.0
  - gxx_linux-64>=11.0.0
  
  # CUDA Toolkit (matches system CUDA 13.0)
  - cudatoolkit=12.1  # Closest to CUDA 13.0
  - cudnn>=8.9.0
  
  # Pip packages (installed via pip after conda)
  - pip>=23.0.0
  
  # Pip-only packages
  - pip:
    # Trading Libraries
    - ib_insync>=0.9.86  # Interactive Brokers
    - alpaca-trade-api>=3.0.0
    
    # Additional ML Libraries
    - ngboost>=0.4.0
    - optuna>=3.2.0  # Hyperparameter optimization
    - shap>=0.42.0  # Model explainability
    
    # Time Series Specific
    - arch>=6.2.0  # ARCH/GARCH models
    
    # Monitoring & Alerts
    - ntfy>=2.7.0  # Notifications
    
    # Additional utilities
    - python-dateutil>=2.8.2
    - pytz>=2023.3
    
    # NOTE: LightGBM with CUDA must be built from source
    # Do NOT install lightgbm via pip - it's CPU only
    # After creating this environment, build LightGBM with:
    #   cd /tmp
    #   git clone --recursive https://github.com/microsoft/LightGBM
    #   cd LightGBM && mkdir build && cd build
    #   cmake -DUSE_CUDA=1 -DCUDA_ARCHITECTURES=86 ..
    #   make -j$(nproc)
    #   cd ../python-package && pip install -e .

# Post-installation instructions:
# 1. Create environment:
#    conda env create -f environment.yml
#
# 2. Activate environment:
#    conda activate trader_env
#
# 3. Build LightGBM with CUDA (RTX 3080):
#    bash scripts/build_lightgbm_cuda.sh
#
# 4. Verify GPU setup:
#    python scripts/check_gpu_setup.py
#
# 5. Test feature selection:
#    python scripts/select_features.py --symbols AAPL

